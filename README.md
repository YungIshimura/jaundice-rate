# Фильтр желтушных новостей

## О проекте

По сути - фильтр новостей, который анализирует новости и возврашает их в `json` формате в вашем бразуере.
Пример ответа
```json
{
  "analyze results": [
    {
      "URL": "https://inosmi.ru/20241203/pandemiya-271003793.html",
      "Статус": "OK",
      "Рейтинг": 1.58,
      "Слов в статье": 884,
      "INFO:root": "Анализ закончен за 0.34 сек"
    },
    {
      "URL": "https://inosmi.ru/20241203/pandemiya-271003793.html",
      "Статус": "OK",
      "Рейтинг": 1.58,
      "Слов в статье": 884,
      "INFO:root": "Анализ закончен за 0.27 сек"
    },
    {
      "URL": "https://lenta.ru/brief/2021/08/26/afg_terror/'",
      "Статус": "FETCH_ERROR",
      "Рейтинг": null,
      "Слов в статье": null
    },
    {
      "URL": "'https://inosmi.ru/20241203/pandemiya-271003793.html",
      "Статус": "FETCH_ERROR",
      "Рейтинг": null,
      "Слов в статье": null
    },
    {
      "URL": "https://inosmi.ru/20241203/pandemiya-271003793.html",
      "Статус": "OK",
      "Рейтинг": 1.58,
      "Слов в статье": 884,
      "INFO:root": "Анализ закончен за 0.33 сек"
    }
  ]
}
```

Пока поддерживается только один новостной сайт - [ИНОСМИ.РУ](https://inosmi.ru/). Для него разработан специальный адаптер, умеющий выделять текст статьи на фоне остальной HTML разметки. Для других новостных сайтов потребуются новые адаптеры, все они будут находиться в каталоге `adapters`. Туда же помещен код для сайта ИНОСМИ.РУ: `adapters/inosmi_ru.py`.

В перспективе можно создать универсальный адаптер, подходящий для всех сайтов, но его разработка будет сложной и потребует дополнительных времени и сил.

## Как установить

Вам понадобится Python версии 3.7 или старше. Для установки пакетов рекомендуется создать виртуальное окружение. В процессе разработки был использован Python версии 3.10.12

Первым шагом установите пакеты:

```python3
pip install -r requirements.txt
```

## Как запустить

```python3
python server.py
```
Далее перейдите на 127.0.0.1:8000 (localhost) в адресной строке вашего браузера. И добавьте query-параметр `urls`. В него и укажите все необходимые ссылки на статью.
[Пример ссылки](http://127.0.0.1:8080/?urls=https://inosmi.ru/20241203/pandemiya-271003793.html,https://lenta.ru/brief/2021/08/26/afg_terror/%27) - http://127.0.0.1:8080/?urls=https://inosmi.ru/20241203/pandemiya-271003793.html,https://lenta.ru/brief/2021/08/26/afg_terror/.

# Как запустить тесты

Для тестирования используется [pytest](https://docs.pytest.org/en/latest/), тестами покрыты фрагменты кода сложные в отладке: text_tools.py и адаптеры. Команды для запуска тестов:

```
python3 -m pytest -s tests.py 
```

# Цели проекта

Код написан в учебных целях. Это урок из курса по веб-разработке — [Девман](https://dvmn.org).
